<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Profile â€” CARE.IO</title>
  <link rel="stylesheet" href="../css/style.css">

  <style>
    body {
      background: var(--bg);
      color: var(--text);
      font-family: 'DM Sans', sans-serif;
      margin: 0;
      overflow-y: auto;
    }
  </style>
</head>

<body>

  <div class="page-container">

    <div class="page-title">User Profile</div>
    <div class="page-subtitle">
      Personalize your CARE.IO experience.
    </div>

    <!-- HERO -->
    <div class="profile-hero">
      <div class="profile-avatar-big" id="profileAvatarBig">ðŸ˜Š</div>
      <div>
        <div class="profile-hero-name" id="profileHeroName">Your Name</div>
        <div class="profile-hero-sub">
          Set your wellness goal below
        </div>
        <div class="profile-hero-badges">
          <span class="profile-badge">ðŸ”¥ 1 day streak</span>
          <span class="profile-badge">Â· CARE.IO Member</span>
        </div>
      </div>
    </div>

    <div class="profile-layout">

      <!-- LEFT COLUMN -->
      <div class="card gap-24">

        <h3>Edit Profile</h3>

        <div class="form-group">
          <label>Your Name</label>
          <input type="text"
                 placeholder="Enter your name"
                 id="profileName">
        </div>

        <div class="form-grid-2">

          <div class="form-group">
            <label>Age</label>
            <input type="number"
                   placeholder="e.g., 21"
                   id="profileAge">
          </div>

          <div class="form-group">
            <label>Email (optional)</label>
            <input type="email"
                   placeholder="your@email.com"
                   id="profileEmail">
          </div>

        </div>

        <div class="form-group">
          <label>Wellness Goal</label>
          <select class="form-select" id="profileGoal">
            <option value="">Select your primary goal</option>
            <option>Reduce stress & anxiety</option>
            <option>Improve sleep quality</option>
            <option>Boost mood & happiness</option>
            <option>Build healthy habits</option>
            <option>Increase mindfulness</option>
          </select>
        </div>

        <div class="form-group">
          <label>Avatar</label>

          <div class="avatar-grid" id="avatarGrid">
            <div class="avatar-opt selected" onclick="selectAvatar(this,'ðŸ˜Š')">ðŸ˜Š</div>
            <div class="avatar-opt" onclick="selectAvatar(this,'ðŸ˜„')">ðŸ˜„</div>
            <div class="avatar-opt" onclick="selectAvatar(this,'ðŸ¥°')">ðŸ¥°</div>
            <div class="avatar-opt" onclick="selectAvatar(this,'ðŸ§˜')">ðŸ§˜</div>
            <div class="avatar-opt" onclick="selectAvatar(this,'ðŸ’ª')">ðŸ’ª</div>
            <div class="avatar-opt" onclick="selectAvatar(this,'ðŸŒŸ')">ðŸŒŸ</div>
            <div class="avatar-opt" onclick="selectAvatar(this,'ðŸ¦‹')">ðŸ¦‹</div>
            <div class="avatar-opt" onclick="selectAvatar(this,'ðŸŒˆ')">ðŸŒˆ</div>
            <div class="avatar-opt" onclick="selectAvatar(this,'ðŸ§ ')">ðŸ§ </div>
          </div>
        </div>

        <button class="btn btn-full" onclick="saveProfile()">
          ðŸ’¾ Save Profile
        </button>

      </div>

      <!-- RIGHT COLUMN -->
      <div>

        <!-- PROGRESS -->
        <div class="card gap-24">

          <h3>Your Progress</h3>

          <div class="progress-grid">
            <div class="prog-item">
              <div class="prog-val" id="progHealth">â€”/100</div>
              <div class="prog-label">Health Score</div>
            </div>

            <div class="prog-item">
              <div class="prog-val" id="progJournal">0 entries</div>
              <div class="prog-label">Journal Entries</div>
            </div>

            <div class="prog-item">
              <div class="prog-val">0 sessions</div>
              <div class="prog-label">Meditation Sessions</div>
            </div>

            <div class="prog-item">
              <div class="prog-val">â€”</div>
              <div class="prog-label">Sleep Quality</div>
            </div>
          </div>

        </div>

        <!-- STREAK -->
        <div class="card gap-24">

          <h3>ðŸ”¥ Daily Streak</h3>

          <div style="display:flex; align-items:center; gap:14px;">
            <div class="streak-circle">1</div>
            <div>
              <div class="streak-num">1 day active</div>
              <div class="streak-sub">
                Keep using CARE.IO daily to grow your streak
              </div>
            </div>
          </div>

          <div style="font-size:0.8rem; color:var(--text3); margin-top:14px;">
            Weekly Activity
          </div>

          <div class="weekly-dots">
            <div class="week-dot active"></div>
            <div class="week-dot"></div>
            <div class="week-dot"></div>
            <div class="week-dot"></div>
            <div class="week-dot"></div>
            <div class="week-dot"></div>
            <div class="week-dot"></div>
          </div>

        </div>

        <!-- PRIVACY -->
        <div class="card gap-24">

          <div class="privacy-title">ðŸ”’ Privacy</div>
          <div class="privacy-text">
            All your data is stored locally on your device.
            Nothing is sent to any server.
            Your journal entries, health scores, and personal information remain completely private.
          </div>

        </div>

      </div>

    </div>

    <div class="toast" id="toast"></div>

  </div>

  <script src="../js/app.js"></script>

  <script>
    function applyTheme() {
      const theme =
        localStorage.getItem('careio-theme') ||
        window.parent?.document?.documentElement?.getAttribute('data-theme') ||
        'dark';

      document.documentElement.setAttribute('data-theme', theme);
    }

    applyTheme();

    window.addEventListener('message', e => {
      if (e.data?.type === 'theme') {
        document.documentElement.setAttribute('data-theme', e.data.theme);
      }
    });

    window.addEventListener('DOMContentLoaded', () => {

      if (typeof initProfile === 'function') {
        initProfile();
      }

      const health  = JSON.parse(localStorage.getItem('careio-healthScore') || '{}');
      const journal = JSON.parse(localStorage.getItem('careio-journalEntries') || '[]');

      if (health.score) {
        document.getElementById('progHealth').textContent =
          health.score + '/100';
      }

      document.getElementById('progJournal').textContent =
        journal.length + ' entries';
    });
  </script>

</body>
</html>
